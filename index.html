<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistem Pendataan Guru Sertifikasi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" />
  <style>
    .fade-in { animation: fadeIn 0.8s ease-in-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .icon-input { position: relative; }
    .icon-input i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #888;
    }
    .icon-input input,
    .icon-input select,
    .icon-input textarea {
      padding-left: 38px !important;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-10">

  <div class="max-w-4xl mx-auto bg-white shadow-2xl rounded-2xl p-8 fade-in">
    <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6">
      <i class="fa-solid fa-graduation-cap mr-2"></i>Sistem Pendataan Guru Sertifikasi
    </h1>

    <form id="guruForm" class="space-y-5">
      <!-- STATUS -->
      <div class="icon-input">
        <i class="fa-solid fa-id-badge"></i>
        <label class="block text-gray-700 font-medium mb-1">Status Sertifikasi</label>
        <select id="statusSertifikasi" class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          <option value="">Pilih Status</option>
          <option value="Sudah Sertifikasi">Sudah Sertifikasi / PPG</option>
          <option value="Belum Sertifikasi">Belum Sertifikasi</option>
        </select>
      </div>

      <!-- NAMA -->
      <div class="grid md:grid-cols-2 gap-4">
        <div class="icon-input">
          <i class="fa-solid fa-user"></i>
          <label>Nama Lengkap</label>
          <input id="namaLengkap" type="text" class="w-full border rounded-lg p-2" required />
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-hashtag"></i>
          <label>NRG (Opsional)</label>
          <input id="nrg" type="text" class="w-full border rounded-lg p-2" />
        </div>
      </div>

      <!-- TTL -->
      <div class="grid md:grid-cols-3 gap-4">
        <div class="icon-input">
          <i class="fa-solid fa-location-dot"></i>
          <label>Tempat Lahir</label>
          <input id="tempatLahir" type="text" class="w-full border rounded-lg p-2" />
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-calendar"></i>
          <label>Tanggal Lahir</label>
          <input id="tanggalLahir" type="date" class="w-full border rounded-lg p-2" />
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-venus-mars"></i>
          <label>Jenis Kelamin</label>
          <select id="jenisKelamin" class="w-full border rounded-lg p-2">
            <option value="">Pilih</option>
            <option value="Laki-laki">Laki-laki</option>
            <option value="Perempuan">Perempuan</option>
          </select>
        </div>
      </div>

      <!-- AGAMA DAN TELEPON -->
      <div class="grid md:grid-cols-2 gap-4">
        <div class="icon-input">
          <i class="fa-solid fa-mosque"></i>
          <label>Agama</label>
          <select id="agama" class="w-full border rounded-lg p-2">
            <option value="">Pilih</option>
            <option>Islam</option><option>Kristen</option>
            <option>Katolik</option><option>Hindu</option>
            <option>Buddha</option><option>Konghucu</option>
          </select>
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-phone"></i>
          <label>No. Telepon</label>
          <input id="noTelepon" type="tel" class="w-full border rounded-lg p-2" />
        </div>
      </div>

      <!-- ALAMAT -->
      <div class="icon-input">
        <i class="fa-solid fa-map"></i>
        <label>Alamat</label>
        <textarea id="alamat" rows="3" class="w-full border rounded-lg p-2"></textarea>
      </div>

      <!-- SEKOLAH -->
      <div class="grid md:grid-cols-2 gap-4">
        <div class="icon-input">
          <i class="fa-solid fa-briefcase"></i>
          <label>Status Kepegawaian</label>
          <select id="statusKepegawaian" class="w-full border rounded-lg p-2">
            <option value="">Pilih</option>
            <option>PNS</option><option>PPPK</option>
            <option>GTT</option><option>GTY</option><option>Honorer</option>
          </select>
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-school"></i>
          <label>Nama Sekolah</label>
          <select id="namaSekolah" class="w-full border rounded-lg p-2">
            <option value="">Pilih Sekolah</option>
            <option>SMP Fajar</option><option>SMK Fajar</option>
            <option>SMK Mutiara Insani</option>
          </select>
        </div>
      </div>

      <!-- S1 DAN MAPEL -->
      <div class="grid md:grid-cols-2 gap-4">
        <div class="icon-input">
          <i class="fa-solid fa-book"></i>
          <label>Bidang Studi S1</label>
          <input id="bidangStudiS1" type="text" class="w-full border rounded-lg p-2" />
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-chalkboard"></i>
          <label>Mata Pelajaran di Sekolah</label>
          <input id="mapel" type="text" class="w-full border rounded-lg p-2" placeholder="Contoh: Informatika, PAI" />
        </div>
      </div>

      <!-- EMAIL -->
      <div class="grid md:grid-cols-2 gap-4">
        <div class="icon-input">
          <i class="fa-solid fa-envelope"></i>
          <label>Email Belajar.id</label>
          <input id="emailBelajar" type="email" class="w-full border rounded-lg p-2" />
        </div>
        <div class="icon-input">
          <i class="fa-solid fa-envelope-open-text"></i>
          <label>Email Pribadi</label>
          <input id="emailPribadi" type="email" class="w-full border rounded-lg p-2" />
        </div>
      </div>

      <!-- FIELD PPG -->
      <div id="fieldSertifikasi" class="hidden bg-green-50 border border-green-300 rounded-xl p-4 mt-2">
        <h3 class="text-green-800 font-bold mb-2"><i class="fa-solid fa-certificate mr-1"></i>Data Sertifikasi / PPG</h3>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="icon-input">
            <i class="fa-solid fa-scroll"></i>
            <label>Jenis Sertifikasi</label>
            <select id="jenisSertifikasi" class="w-full border rounded-lg p-2">
              <option value="">Pilih</option>
              <option value="PLPG">PLPG</option>
              <option value="PPG">PPG</option>
            </select>
          </div>
          <div class="icon-input">
            <i class="fa-solid fa-book-open"></i>
            <label>Bidang Studi Sertifikasi</label>
            <input id="bidangSertifikasi" type="text" class="w-full border rounded-lg p-2" />
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-4 mt-2">
          <div class="icon-input">
            <i class="fa-solid fa-calendar-check"></i>
            <label>Tanggal Mulai Berlaku</label>
            <input id="tanggalMulaiBerlaku" type="date" class="w-full border rounded-lg p-2" />
          </div>
          <div class="icon-input">
            <i class="fa-solid fa-id-card"></i>
            <label>Nomor Peserta Sertifikasi / PLPG</label>
            <input id="nomorPeserta" type="text" class="w-full border rounded-lg p-2" />
          </div>
        </div>
      </div>

      <!-- BUTTONS -->
      <div class="flex justify-end gap-3 mt-5">
        <button type="reset" class="bg-gray-400 hover:bg-gray-500 text-white px-5 py-2 rounded-lg"><i class="fa-solid fa-rotate-left mr-1"></i>Reset</button>
        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg"><i class="fa-solid fa-paper-plane mr-1"></i>Kirim</button>
      </div>
    </form>

    <div id="notif" class="hidden text-center mt-4 text-lg font-semibold"></div>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw9dq89Zb3lRx7QqhLMaJThD-gViADodqkbs94onpDwhq7474IATc6mRtnmbrEF2J71/exec";

    // tampilkan field PPG otomatis
    document.getElementById("statusSertifikasi").addEventListener("change", (e) => {
      document.getElementById("fieldSertifikasi").classList.toggle("hidden", e.target.value !== "Sudah Sertifikasi");
    });

    // kirim data
    document.getElementById("guruForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const notif = document.getElementById("notif");
      notif.classList.add("hidden");

      const btn = e.submitter;
      btn.disabled = true;
      btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>Mengirim...';

      const data = {
        "Status Sertifikasi": document.getElementById("statusSertifikasi").value,
        "Nama Lengkap": document.getElementById("namaLengkap").value,
        "NRG": document.getElementById("nrg").value,
        "Tempat Lahir": document.getElementById("tempatLahir").value,
        "Tanggal Lahir": document.getElementById("tanggalLahir").value,
        "Jenis Kelamin": document.getElementById("jenisKelamin").value,
        "Agama": document.getElementById("agama").value,
        "No. Telepon": document.getElementById("noTelepon").value,
        "Alamat": document.getElementById("alamat").value,
        "Status Kepegawaian": document.getElementById("statusKepegawaian").value,
        "Nama Sekolah": document.getElementById("namaSekolah").value,
        "Bidang Studi S1": document.getElementById("bidangStudiS1").value,
        "Mata Pelajaran di Sekolah": document.getElementById("mapel").value,
        "Email Belajar.id": document.getElementById("emailBelajar").value,
        "Email Pribadi": document.getElementById("emailPribadi").value,
        "Jenis Sertifikasi": document.getElementById("jenisSertifikasi").value,
        "Bidang Studi Sertifikasi": document.getElementById("bidangSertifikasi").value,
        "Tanggal Mulai Berlaku": document.getElementById("tanggalMulaiBerlaku").value,
        "Nomor Peserta Sertifikasi/PLPG": document.getElementById("nomorPeserta").value,
        "Upload Dokumen Sertifikat": "",
        "Upload SK KBM": "",
        "Upload Surat Tugas": ""
      };

      try {
        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        const result = await res.json();
        notif.classList.remove("hidden");
        if (result.success) {
          notif.className = "text-green-600 text-center mt-4 font-bold";
          notif.innerHTML = "<i class='fa-solid fa-circle-check mr-2'></i>Data berhasil tersimpan di Google Sheet!";
          e.target.reset();
        } else {
          notif.className = "text-red-600 text-center mt-4 font-bold";
          notif.innerText = "❌ " + result.error;
        }
      } catch (err) {
        notif.classList.remove("hidden");
        notif.className = "text-red-600 text-center mt-4 font-bold";
        notif.innerText = "⚠️ Gagal menyimpan: " + err.message;
      } finally {
        btn.disabled = false;
        btn.innerHTML = '<i class="fa-solid fa-paper-plane mr-1"></i>Kirim';
      }
    });
  </script>
</body>
</html>
